<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setup SPAMc â€¢ mapspam2globiom</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Setup SPAMc">
<meta property="og:description" content="mapspam2globiom">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mapspam2globiom</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Getting started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting_started.html">1. Software and hardware</a>
    </li>
    <li>
      <a href="../articles/template.html">2. Template</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Implementation steps
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/model_setup.html">1. Model setup</a>
    </li>
    <li>
      <a href="../articles/process_subnat_stat.html">2. Process subnational statistics</a>
    </li>
    <li>
      <a href="../articles/process_spatial_data.html">3. Process spatial data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/iiasa/mapspam2globiom">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Setup SPAMc</h1>
            
      
      
      <div class="hidden name"><code>setup_SPAMc.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">mapspam2globiom</span>)</pre></body></html></div>
<div id="check-workflowr-on-how-to-show-project-folder-" class="section level1">
<h1 class="hasAnchor">
<a href="#check-workflowr-on-how-to-show-project-folder-" class="anchor"></a>Check workflowr on how to show project folder.</h1>
<div id="httpsjdblischak-github-ioworkflowrarticleswflow-01-getting-started-html" class="section level2">
<h2 class="hasAnchor">
<a href="#httpsjdblischak-github-ioworkflowrarticleswflow-01-getting-started-html" class="anchor"></a><a href="https://jdblischak.github.io/workflowr/articles/wflow-01-getting-started.html" class="uri">https://jdblischak.github.io/workflowr/articles/wflow-01-getting-started.html</a>
</h2>
<p>To set up SPAMc the following steps should be followed in the order as listed below. It is assumed that all required software is already installed (see <a href="getting_started.html">Getting started</a>).</p>
<ol style="list-style-type: decimal">
<li>create R project</li>
<li>Initialize model</li>
<li>Set parameters and data location</li>
<li>Create data folder structure</li>
</ol>
<p>This creates the basic SPAM model with the following dimensions: - 40 crop or crop groups (@ref(croplist)) - 4 farming systems (subsistence, rainfed low-input, rainfed high-input, irrigated)</p>
<p>Technically, these dimensions can be easiliy changed if for instance an increase in number of crops is desired. In practice, certain type of input data that SPAM takes from global databases is not available. The 40 crops were selected because global suitability layers were available from GAEZ. If there is a need to increase the number of crops, the user must prepare or add new suitability maps. Appendix X provides more information on how to add more crops.</p>
</div>
<div id="create-r-project" class="section level2">
<h2 class="hasAnchor">
<a href="#create-r-project" class="anchor"></a>Create R project</h2>
<p>Name versioning</p>
</div>
<div id="initialize-model" class="section level2">
<h2 class="hasAnchor">
<a href="#initialize-model" class="anchor"></a>Initialize model</h2>
<p>Prepared a function to copy all scripts to the R project</p>
<p>Creates following folders and files</p>
<p><span class="citation">[@ADD folder and file tree]</span></p>
</div>
<div id="set-model-parameters-and-file-location" class="section level2">
<h2 class="hasAnchor">
<a href="#set-model-parameters-and-file-location" class="anchor"></a>Set model parameters and file location</h2>
<p><code>set</code> script needs to be prepared before SPAM can be set up. It has the following parameters.</p>
<div id="set-country" class="section level3">
<h3 class="hasAnchor">
<a href="#set-country" class="anchor"></a>Set country</h3>
<p>SPAM uses ISO 3166-1 alpha-3 codes (hereafter iso3c) to determine the country and extract relevant data from global databases. ISO 3166-1 alpha-3 codes are three-letter country codes defined in ISO 3166-1, part of the ISO 3166 standard published by the International Organization for Standardization (ISO). A full list of iso3c codes can be found on Wikipedia <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">here</a>. For China the iso3c code is <code>CHN</code>. Not all data sources use iso3c codes so we added a script to determine a number of other country identifiers, including the standard full country name, the iso3 numerical code and the country identifier used by FAOSTAT. We also add the continent information, which is sometimes needed to select a continent-level spatial map.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">iso3c_sel</span> <span class="kw">&lt;-</span> <span class="st">"CHN"</span>
<span class="no">country_sel</span> <span class="kw">&lt;-</span> <span class="fu">countrycode</span>(<span class="no">iso3c_sel</span>, <span class="st">"iso3c"</span>, <span class="st">"country.name"</span>)
<span class="no">iso3n_sel</span> <span class="kw">&lt;-</span> <span class="fu">countrycode</span>(<span class="no">iso3c_sel</span>, <span class="st">"iso3c"</span>, <span class="st">"iso3n"</span>)
<span class="no">fao_sel</span> <span class="kw">&lt;-</span> <span class="fu">countrycode</span>(<span class="no">iso3c_sel</span>, <span class="st">"iso3c"</span>, <span class="st">"fao"</span>)
<span class="no">continent_sel</span> <span class="kw">&lt;-</span> <span class="fu">countrycode</span>(<span class="no">iso3c_sel</span>, <span class="st">"iso3c"</span>, <span class="st">"continent"</span>)</pre></body></html></div>
</div>
<div id="set-year" class="section level3">
<h3 class="hasAnchor">
<a href="#set-year" class="anchor"></a>Set year</h3>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">year_sel</span> <span class="kw">&lt;-</span> <span class="fl">2010</span></pre></body></html></div>
</div>
<div id="set-resolution" class="section level3">
<h3 class="hasAnchor">
<a href="#set-resolution" class="anchor"></a>Set resolution</h3>
<p>Two options <code>30sec</code> or <code>5min</code></p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">grid_sel</span> <span class="kw">&lt;-</span> <span class="st">"5min"</span></pre></body></html></div>
</div>
<div id="set-administrative-zone-level" class="section level3">
<h3 class="hasAnchor">
<a href="#set-administrative-zone-level" class="anchor"></a>Set administrative zone level</h3>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">adm_sel</span> <span class="kw">&lt;-</span> <span class="fl">2</span></pre></body></html></div>
</div>
<div id="set-solve-level" class="section level3">
<h3 class="hasAnchor">
<a href="#set-solve-level" class="anchor"></a>Set solve level</h3>
<p>Solve at country level (solve_sel = 0) or at adminstrative level (solve_sel = 1)</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">solve_sel</span> <span class="kw">&lt;-</span> <span class="fl">1</span></pre></body></html></div>
</div>
<div id="set-file-location" class="section level3">
<h3 class="hasAnchor">
<a href="#set-file-location" class="anchor"></a>Set file location</h3>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="co">### SET DATAPATH</span>
<span class="co"># Michiel IIASA</span>
<span class="kw">if</span>(<span class="fu"><a href="https://rdrr.io/r/base/Sys.info.html">Sys.info</a></span>()[<span class="st">"user"</span>] <span class="kw">==</span> <span class="st">"vandijkm"</span>) {
  <span class="no">glob_path</span> <span class="kw">&lt;-</span> <span class="st">"P:/globiom/crop_map/data/Global"</span>
  <span class="no">crop_map_path</span> <span class="kw">&lt;-</span> <span class="st">"E:/Dropbox/crop_map_CHN"</span>
  <span class="no">mappings_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">crop_map_path</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"data/mappings"</span>))
  <span class="no">iso3c_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">crop_map_path</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"data/"</span>, <span class="no">year_sel</span>, <span class="st">"/"</span>, <span class="no">iso3c_sel</span>))
  <span class="no">raw_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">iso3c_path</span>, <span class="st">"raw"</span>)
  <span class="no">proc_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="no">iso3c_path</span>, <span class="st">"/processed"</span>)
  <span class="no">spam_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">crop_map_path</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SPAM_2.0/"</span>, <span class="no">year_sel</span>, <span class="st">"/"</span>, <span class="no">iso3c_sel</span>))
  <span class="no">gams_path</span> <span class="kw">&lt;-</span> <span class="st">"C:/GAMS/win64/25.0"</span>
}</pre></body></html></div>
</div>
</div>
<div id="create-data-folder-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#create-data-folder-structure" class="anchor"></a>Create data folder structure</h2>
<p>Reads folder location from <code>set_parameters.r</code></p>
<p>This creates the folder structure as depicted below in the R project.</p>
<p>Now the model is set up, it is time to collect input data and put them in the right location, which is described in Chapter @(data)</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Michiel Van Dijk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
