<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Model setup â€¢ mapspam2globiom</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Model setup">
<meta property="og:description" content="mapspam2globiom">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mapspam2globiom</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Background
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">1. Introduction</a>
    </li>
    <li>
      <a href="../articles/model_structure.html">2. Model structure</a>
    </li>
    <li>
      <a href="../articles/input_data.html">3. Input data</a>
    </li>
    <li>
      <a href="../articles/appendix.html">4. Appendix</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Get started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/software.html">1. Software and hardware</a>
    </li>
    <li>
      <a href="../articles/template.html">2. Template</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Run SPAMc
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/setup.html">1. Model setup</a>
    </li>
    <li>
      <a href="../articles/process_subnat_stat.html">2. Process subnational statistics</a>
    </li>
    <li>
      <a href="../articles/process_spatial_data.html">3. Process spatial data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/appendix.html">Appendix: model equations</a>
    </li>
    <li>
      <a href="../articles/input_data.html">input_data</a>
    </li>
    <li>
      <a href="../articles/introduction.html">introduction</a>
    </li>
    <li>
      <a href="../articles/model_structure.html">Model structure</a>
    </li>
    <li>
      <a href="../articles/process_spatial_data.html">Process spatial data</a>
    </li>
    <li>
      <a href="../articles/process_subnat_stat.html">Process subnational statistics</a>
    </li>
    <li>
      <a href="../articles/setup.html">Model setup</a>
    </li>
    <li>
      <a href="../articles/software.html">Get started</a>
    </li>
    <li>
      <a href="../articles/template.html">Template and examples</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/iiasa/mapspam2globiom">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Model setup</h1>
            
      
      
      <div class="hidden name"><code>setup.Rmd</code></div>

    </div>

    
    
<p>To setup SPAMc two steps need to be taken (the order is important!). It is assumed that all required software is already installed and working (see <a href="software.html">software and hardware</a>). As <a href="template.html">mentioned</a>, it is by far the easiest to install the template in an RStudio project first and then start to work on your own country SPAMc version as all the steps discussed from now on are already pre-coded in the template.</p>
<div id="create-spamc-folder-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#create-spamc-folder-structure" class="anchor"></a>Create SPAMc folder structure</h2>
<p>mapspam2globiom includes a function to create all necessary folders <code><a href="../reference/create_spam_folders.html">create_spam_folders()</a></code>. The only input it requires is a path on your harddisk. We do not recommend using a server to store the model as the potential increase in file access time might seriously affect the time it takes to process some of the spatial datasets which can be very large. Note that it is perfectly fine to store large <em>raw data</em> files on a server (see below).</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># Load mapspam2globiom</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"mapspam2globiom"</span>)

<span class="co"># Set the folder where the model will be stored</span>
<span class="co"># Note that R uses forward slashes even in Windows!!</span>
<span class="no">spamc_path</span> <span class="kw">&lt;-</span> <span class="st">"C:/Users/dijk158/Dropbox/mapspam2globiom_mwi"</span>

<span class="co"># Create SPAMc folder structure in the spamc_path</span>
<span class="fu"><a href="../reference/create_spam_folders.html">create_spam_folders</a></span>(<span class="no">spamc_path</span>)</pre></body></html></div>
</div>
<div id="set-model-parameters-and-location-of-files" class="section level2">
<h2 class="hasAnchor">
<a href="#set-model-parameters-and-location-of-files" class="anchor"></a>Set model parameters and location of files</h2>
<p>Nearly all functions in mapspam2globiom need input on (1) key parameters that determine the design of the model and how will be solved and (2) the location of raw and intermediate data, which will be processed. Both pieces of information are bundled and stored by the function <code><a href="../reference/set_spam_par.html">set_spam_par()</a></code>.</p>
<p><code>set</code> script needs to be prepared before SPAM can be set up. It has the following parameters.</p>
<div id="set-country" class="section level3">
<h3 class="hasAnchor">
<a href="#set-country" class="anchor"></a>Set country</h3>
<p>SPAM uses ISO 3166-1 alpha-3 codes (hereafter iso3c) to determine the country and extract relevant data from global databases. ISO 3166-1 alpha-3 codes are three-letter country codes defined in ISO 3166-1, part of the ISO 3166 standard published by the International Organization for Standardization (ISO). A full list of iso3c codes can be found on Wikipedia <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">here</a>. For China the iso3c code is <code>CHN</code>. Not all data sources use iso3c codes so we added a script to determine a number of other country identifiers, including the standard full country name, the iso3 numerical code and the country identifier used by FAOSTAT. We also add the continent information, which is sometimes needed to select a continent-level spatial map.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">iso3c_sel</span> <span class="kw">&lt;-</span> <span class="st">"CHN"</span>
<span class="no">country_sel</span> <span class="kw">&lt;-</span> <span class="fu">countrycode</span>(<span class="no">iso3c_sel</span>, <span class="st">"iso3c"</span>, <span class="st">"country.name"</span>)
<span class="no">iso3n_sel</span> <span class="kw">&lt;-</span> <span class="fu">countrycode</span>(<span class="no">iso3c_sel</span>, <span class="st">"iso3c"</span>, <span class="st">"iso3n"</span>)
<span class="no">fao_sel</span> <span class="kw">&lt;-</span> <span class="fu">countrycode</span>(<span class="no">iso3c_sel</span>, <span class="st">"iso3c"</span>, <span class="st">"fao"</span>)
<span class="no">continent_sel</span> <span class="kw">&lt;-</span> <span class="fu">countrycode</span>(<span class="no">iso3c_sel</span>, <span class="st">"iso3c"</span>, <span class="st">"continent"</span>)</pre></body></html></div>
</div>
<div id="set-year" class="section level3">
<h3 class="hasAnchor">
<a href="#set-year" class="anchor"></a>Set year</h3>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">year_sel</span> <span class="kw">&lt;-</span> <span class="fl">2010</span></pre></body></html></div>
</div>
<div id="set-resolution" class="section level3">
<h3 class="hasAnchor">
<a href="#set-resolution" class="anchor"></a>Set resolution</h3>
<p>Two options <code>30sec</code> or <code>5min</code></p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">grid_sel</span> <span class="kw">&lt;-</span> <span class="st">"5min"</span></pre></body></html></div>
</div>
<div id="set-administrative-zone-level" class="section level3">
<h3 class="hasAnchor">
<a href="#set-administrative-zone-level" class="anchor"></a>Set administrative zone level</h3>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">adm_sel</span> <span class="kw">&lt;-</span> <span class="fl">2</span></pre></body></html></div>
</div>
<div id="set-solve-level" class="section level3">
<h3 class="hasAnchor">
<a href="#set-solve-level" class="anchor"></a>Set solve level</h3>
<p>Solve at country level (solve_sel = 0) or at adminstrative level (solve_sel = 1)</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">solve_sel</span> <span class="kw">&lt;-</span> <span class="fl">1</span></pre></body></html></div>
</div>
<div id="set-file-location" class="section level3">
<h3 class="hasAnchor">
<a href="#set-file-location" class="anchor"></a>Set file location</h3>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="co">### SET DATAPATH</span>
<span class="co"># Michiel IIASA</span>
<span class="kw">if</span>(<span class="fu"><a href="https://rdrr.io/r/base/Sys.info.html">Sys.info</a></span>()[<span class="st">"user"</span>] <span class="kw">==</span> <span class="st">"vandijkm"</span>) {
  <span class="no">glob_path</span> <span class="kw">&lt;-</span> <span class="st">"P:/globiom/crop_map/data/Global"</span>
  <span class="no">crop_map_path</span> <span class="kw">&lt;-</span> <span class="st">"E:/Dropbox/crop_map_CHN"</span>
  <span class="no">mappings_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">crop_map_path</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"data/mappings"</span>))
  <span class="no">iso3c_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">crop_map_path</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"data/"</span>, <span class="no">year_sel</span>, <span class="st">"/"</span>, <span class="no">iso3c_sel</span>))
  <span class="no">raw_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">iso3c_path</span>, <span class="st">"raw"</span>)
  <span class="no">proc_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="no">iso3c_path</span>, <span class="st">"/processed"</span>)
  <span class="no">spam_path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">crop_map_path</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SPAM_2.0/"</span>, <span class="no">year_sel</span>, <span class="st">"/"</span>, <span class="no">iso3c_sel</span>))
  <span class="no">gams_path</span> <span class="kw">&lt;-</span> <span class="st">"C:/GAMS/win64/25.0"</span>
}</pre></body></html></div>
</div>
</div>
<div id="create-data-folder-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#create-data-folder-structure" class="anchor"></a>Create data folder structure</h2>
<p>Reads folder location from <code>set_parameters.r</code></p>
<p>This creates the folder structure as depicted below in the R project.</p>
<p>Now the model is set up, it is time to collect input data and put them in the right location, which is described in Chapter @(data)</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Michiel Van Dijk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
